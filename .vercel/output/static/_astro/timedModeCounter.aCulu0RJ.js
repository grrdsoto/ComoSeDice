import{j as w}from"./jsx-runtime.9YwcPWTT.js";import{r as R}from"./index.LFf77hJu.js";import{c as z}from"./confetti.module.6xrGE80J.js";var L=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N={exports:{}};(function(T,p){(function(g,f){T.exports=f(R)})(typeof self<"u"?self:L,g=>(()=>{var f={156:n=>{n.exports=g}},x={};function i(n){var m=x[n];if(m!==void 0)return m.exports;var o=x[n]={exports:{}};return f[n](o,o.exports,i),o.exports}i.d=(n,m)=>{for(var o in m)i.o(m,o)&&!i.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:m[o]})},i.o=(n,m)=>Object.prototype.hasOwnProperty.call(n,m),i.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var S={};return(()=>{i.r(S),i.d(S,{default:()=>G,useStopwatch:()=>O,useTime:()=>A,useTimer:()=>k});var n=i(156);class m{static expiryTimestamp(e){const t=new Date(e).getTime()>0;return t||console.warn("react-timer-hook: { useTimer } Invalid expiryTimestamp settings",e),t}static onExpire(e){const t=e&&typeof e=="function";return e&&!t&&console.warn("react-timer-hook: { useTimer } Invalid onExpire settings function",e),t}}class o{static getTimeFromSeconds(e){const t=Math.ceil(e),r=Math.floor(t/86400),a=Math.floor(t%86400/3600),u=Math.floor(t%3600/60);return{totalSeconds:t,seconds:Math.floor(t%60),minutes:u,hours:a,days:r}}static getSecondsFromExpiry(e,t){const r=e-new Date().getTime();if(r>0){const a=r/1e3;return t?Math.round(a):a}return 0}static getSecondsFromPrevTime(e,t){const r=new Date().getTime()-e;if(r>0){const a=r/1e3;return t?Math.round(a):a}return 0}static getSecondsFromTimeNow(){const e=new Date;return e.getTime()/1e3-60*e.getTimezoneOffset()}static getFormattedTimeFromSeconds(e,t){const{seconds:r,minutes:a,hours:u}=o.getTimeFromSeconds(e);let c="",d=u;return t==="12-hour"&&(c=u>=12?"pm":"am",d=u%12),{seconds:r,minutes:a,hours:d,ampm:c}}}function C(s,e){const t=(0,n.useRef)();(0,n.useEffect)(()=>{t.current=s}),(0,n.useEffect)(()=>{if(!e)return()=>{};const r=setInterval(()=>{t.current&&t.current()},e);return()=>clearInterval(r)},[e])}const B=1e3;function P(s){if(!m.expiryTimestamp(s))return null;const e=o.getSecondsFromExpiry(s),t=Math.floor(1e3*(e-Math.floor(e)));return t>0?t:B}function k(){let{expiryTimestamp:s,onExpire:e,autoStart:t=!0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const[r,a]=(0,n.useState)(s),[u,c]=(0,n.useState)(o.getSecondsFromExpiry(r)),[d,y]=(0,n.useState)(t),[h,I]=(0,n.useState)(t),[M,b]=(0,n.useState)(P(r)),v=(0,n.useCallback)(()=>{m.onExpire(e)&&e(),y(!1),b(null)},[e]),j=(0,n.useCallback)(()=>{y(!1)},[]),E=(0,n.useCallback)(function(l){let D=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];b(P(l)),I(D),y(D),a(l),c(o.getSecondsFromExpiry(l))},[]),F=(0,n.useCallback)(()=>{const l=new Date;l.setMilliseconds(l.getMilliseconds()+1e3*u),E(l)},[u,E]),H=(0,n.useCallback)(()=>{h?(c(o.getSecondsFromExpiry(r)),y(!0)):F()},[r,h,F]);return C(()=>{M!==B&&b(B);const l=o.getSecondsFromExpiry(r);c(l),l<=0&&v()},d?M:null),{...o.getTimeFromSeconds(u),start:H,pause:j,resume:F,restart:E,isRunning:d}}function O(){let{autoStart:s,offsetTimestamp:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const[t,r]=(0,n.useState)(o.getSecondsFromExpiry(e,!0)||0),[a,u]=(0,n.useState)(new Date),[c,d]=(0,n.useState)(t+o.getSecondsFromPrevTime(a||0,!0)),[y,h]=(0,n.useState)(s);C(()=>{d(t+o.getSecondsFromPrevTime(a,!0))},y?1e3:null);const I=(0,n.useCallback)(()=>{const v=new Date;u(v),h(!0),d(t+o.getSecondsFromPrevTime(v,!0))},[t]),M=(0,n.useCallback)(()=>{r(c),h(!1)},[c]),b=(0,n.useCallback)(function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];const E=o.getSecondsFromExpiry(v,!0)||0,F=new Date;u(F),r(E),h(j),d(E+o.getSecondsFromPrevTime(F,!0))},[]);return{...o.getTimeFromSeconds(c),start:I,pause:M,reset:b,isRunning:y}}function A(){let{format:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const[e,t]=(0,n.useState)(o.getSecondsFromTimeNow());return C(()=>{t(o.getSecondsFromTimeNow())},1e3),{...o.getFormattedTimeFromSeconds(e,s)}}function G(s){if((0,n.useEffect)(()=>{console.warn("react-timer-hook: default export useTimer is deprecated, use named exports { useTimer, useStopwatch, useTime } instead")},[]),s.expiryTimestamp){const t=k(s);return{...t,startTimer:t.start,stopTimer:t.pause,resetTimer:()=>{}}}const e=O(s);return{...e,startTimer:e.start,stopTimer:e.pause,resetTimer:e.reset}}})(),S})())})(N);var W=N.exports;function J(T){let p=document.getElementById("timedModeScore"),g=document.getElementById("timedModeBestScore");if(parseInt(p.textContent.split(" ")[1])>parseInt(g.textContent.split(" ")[2]))fetch("true/api/users/updateScore"+T,{method:"POST",header:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({bestScore:parseInt(p.textContent.split(" ")[1]),gamesPlayed:0})}).then(()=>{console.log("Updated")}),g.innerHTML="Best score: "+p.textContent.split(" ")[1],document.getElementById("userOficialHighScore").textContent="New High Score: "+p.textContent.split(" ")[1],z(),document.getElementById("timedGameModeModal").showModal();else{let f=document.getElementById("nextWordContainer"),x=document.getElementById("timedModeGuessField"),i=document.getElementById("timedModeGuessButton"),S=document.getElementById("timedModePlayAgainButton");f.innerHTML="Time up!",x.style.display="none",i.style.display="none",S.style.display="inline"}}function K(T){let p=T.expiryTimestamp,g=T.id;const{seconds:f,minutes:x}=W.useTimer({expiryTimestamp:p,onExpire:()=>J(g)}),i=S=>String(S).padStart(2,"0");return w.jsx("div",{style:{textAlign:"center"},children:w.jsxs("div",{style:{fontSize:"30px"},children:[w.jsx("span",{children:i(x)}),":",w.jsx("span",{children:i(f)})]})})}export{K as default};
