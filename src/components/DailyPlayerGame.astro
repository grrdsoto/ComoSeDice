---
/**
 * Interface used to bring in the userSnapshot of the current user that is logged in.
 */
interface Props {
	userSnapshot: any;
}

const { userSnapshot } = Astro.props;

import NextWordCard from "./NextWordCard.astro";

// REACT
import DailyChallengeGame from './react/dailyChallengeGame.jsx';

import { checkCookieSessionAndGetUser } from '../pages/api/users/user.js'

const user = await checkCookieSessionAndGetUser(Astro.cookies.get("session")?.value);

const id = user.uid;

// Gets the words from the api hosted in localhost.
const response = await fetch("http://localhost:4321/api/dailyChallenge.json");
const words = await response.json();
console.log("All words: " + words);

const firstWord = words[0].spanish;
const firstWordType = words[0].type;
---

<NextWordCard word={ firstWord } wordType={ firstWordType }></NextWordCard>

<DailyChallengeGame client:idle id={ id } user={ userSnapshot } wordsMap={ words }/>